<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>TwitchChatArchive</title>
	<style>
	body {
		font-family: Arial, sans-serif;
		margin: 0;
		padding: 0;
		background-color: #333;
		color: #ddd
	}

	h2 {
		margin: 0;
		padding: 0;
	}

	li {
		margin-bottom: 5px;
	}

	a {
		text-decoration: none;
		color: lightblue;
	}

	a:hover {
		text-decoration: underline;
	}
	</style>
</head>

<body>
	<script>
	(async () => {
		const response = await fetch('https://api.github.com/repos/Californ1a/TwitchChatArchive/contents/');
		const data = await response.json();
		console.log(data);
		let htmlString = '';

		for (let file of data) {
			if (file.type === 'dir') {
				htmlString += `<h2>${file.name}</h2><div id="${file.name}"></div>`;
				const res2 = await fetch(`https://api.github.com/repos/Californ1a/TwitchChatArchive/contents/${file.name}`);
				const data2 = await res2.json();
				htmlString += '<ul>';
				for (let file2 of data2) {
					if (file2.name.endsWith('.html')) {
						htmlString += `<li><a href="${file2.path}">${file2.name}</a></li>`;
					}
				}
				htmlString += '</ul>';
			}
		}

		document.getElementsByTagName('body')[0].innerHTML = htmlString;
	})()
	</script>
</body>

</html>
